<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<TargetEndpoint name="default">
  <Description/>
  <FaultRules>
    <FaultRule name="ErrorsHandling">
      <Step>
        <Condition>(response.status.code = 409 OR response.status.code = 404)</Condition>
        <Name>AM-ERROR-SUB</Name>
      </Step>
      <Step>
        <Name>RF-ERROR-SUB</Name>
      </Step>
    </FaultRule>
  </FaultRules>
  <PreFlow name="PreFlow">
    <Request/>
    <Response>
    </Response>
  </PreFlow>
  <PostFlow name="PostFlow">
    <Request/>
    <Response/>
  </PostFlow>
  <Flows>
    <Flow name="addSubscription">
      <Description>Creates a subscription.</Description>
      <Request>
        <Step>
          <Name>JS-REQUEST-POST-SUB</Name>
        </Step>
      </Request>
      <Response>
        <Step>
          <Name>JS-GET-ID-RESPONSE</Name>
        </Step>
      </Response>
      <Condition>(proxy.pathsuffix MatchesPath "/subscriptions") and (request.verb = "PUT")</Condition>
    </Flow>
    <Flow name="getAllSubscriptionsId">
      <Description>Returns id list</Description>
      <Request>
        <Step>
          <Name>JS-REQUEST-GET-SUB</Name>
        </Step>
      </Request>
      <Response/>
      <Condition>(proxy.pathsuffix MatchesPath "/subscriptions") and (request.verb = "GET")</Condition>
    </Flow>
  </Flows>
  <HTTPTargetConnection>
    <URL>https://pubsub.googleapis.com/v1/projects/mcm-monoproject-777</URL>
    <Authentication>
      <GoogleAccessToken>
        <Scopes>
          <Scope>https://www.googleapis.com/auth/cloud-platform</Scope>
        </Scopes>
      </GoogleAccessToken>
    </Authentication>
  </HTTPTargetConnection>
</TargetEndpoint>
