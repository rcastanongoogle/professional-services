<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ServiceCallout continueOnError="false" enabled="true" name="SC-SCHEDULER-CALL">
  <DisplayName>SC-SCHEDULER-CALL</DisplayName>
  <Properties/>
  <Request clearPayload="true" variable="myRequest">
    <Set>
      <Headers>
        <Header name="Accept">application/json</Header>
        <Header name="Content-Type">application/json</Header>
      </Headers>
      <Verb>POST</Verb>
      <Payload contentType="application/json">
      {
        "name": "projects/mcm-monoproject-777/locations/us-central1/jobs/{ruleset.id}",
        "description": "Rule execution.",
        "schedule": "{ruleset.frequency}",
        "timeZone": "America/Bogota",
        "httpTarget": {
          "httpMethod": "POST",
          "uri": "https://workflowexecutions.googleapis.com/v1/projects/mcm-monoproject-777/locations/us-central1/workflows/workflow-read-firestore-params/executions",
          "headers": {
            "Content-Type": "application/octet-stream",
            "User-Agent": "Google-Cloud-Scheduler"
          },
          "body": "{ruleset.body}",
          "oauthToken": {
            "serviceAccountEmail": "sa-rule-engine-api@mcm-monoproject-777.iam.gserviceaccount.com"
          }
        }
      }
      </Payload>
    </Set>
    <IgnoreUnresolvedVariables>false</IgnoreUnresolvedVariables>
  </Request>
  <Response>calloutResponse</Response>
  <HTTPTargetConnection>
    <Properties/>
    <URL>https://cloudscheduler.googleapis.com/v1/projects/mcm-monoproject-777/locations/us-central1/jobs</URL>
    <Authentication>
      <GoogleAccessToken>
        <Scopes>
          <Scope>https://www.googleapis.com/auth/cloud-platform</Scope>
        </Scopes>
      </GoogleAccessToken>
    </Authentication>
  </HTTPTargetConnection>
</ServiceCallout>
